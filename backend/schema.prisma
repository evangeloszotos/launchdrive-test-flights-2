// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model Profile {
  id       String    @id @default(cuid())
  name     String    @default("")
  notes    String    @default("")
  owner    User?     @relation("Profile_owner", fields: [ownerId], references: [id])
  ownerId  String?   @map("owner")
  projects Project[] @relation("Project_profile")
  status   String    @default("active")

  @@index([ownerId])
}

model Project {
  id        String    @id @default(cuid())
  profile   Profile?  @relation("Project_profile", fields: [profileId], references: [id])
  profileId String?   @map("profile")
  status    String    @default("active")
  title     String    @default("")
  notes     String    @default("")
  variants  Variant[] @relation("Variant_project")

  @@index([profileId])
}

model Template {
  id                    String    @id @default(cuid())
  title                 String    @default("")
  preview               Json?
  from_Variant_template Variant[] @relation("Variant_template")
}

model User {
  id       String     @id @default(cuid())
  name     String     @default("")
  email    String     @unique @default("")
  password String
  roles    UserRole[] @relation("User_roles")
  s3Secret String     @default("")
  profiles Profile[]  @relation("Profile_owner")

  @@index([s3Secret])
}

model UserRole {
  id              String @id @default(cuid())
  name            String @default("")
  from_User_roles User[] @relation("User_roles")
}

model Variant {
  id         String    @id @default(cuid())
  project    Project?  @relation("Variant_project", fields: [projectId], references: [id])
  projectId  String?   @map("project")
  template   Template? @relation("Variant_template", fields: [templateId], references: [id])
  templateId String?   @map("template")
  status     String    @default("active")
  title      String    @default("")

  @@index([projectId])
  @@index([templateId])
}